<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Cart | GlorÃ© Classique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="top-bar">
  <div class="hamburger-wrap">
    <button class="hamburger" type="button" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <div class="brand-header-stack">
    <span class="brand-header-top">GlorÃ©</span>
    <span class="brand-header-bottom">Classique</span>
  </div>
  <div style="flex:1"></div>
  <button class="cart-btn" type="button" aria-label="Edit cart">
    <span class="cart-icon-wrap" style="position:relative;display:inline-block;">
      <span class="cart-icon">ðŸ›’</span>
      <span id="cart-count" class="cart-count">0</span>
    </span>
  </button>
</div>
<div class="nav-overlay" tabindex="-1"></div>
<div class="cart-overlay" tabindex="-1"></div>
<div class="nav-overlay"></div>
<div class="cart-overlay" onclick="toggleCart()"></div>
<div class="page">
  <div class="content">
    <main>
      <section>
        <div class="shell">
          <h2 class="fancy-eyebrow" style="margin-top: -0.7em; margin-bottom: 0.2em;">Your Cart</h2>
          <div id="cart-list" class="cart-list"></div>
          <div id="cart-total" class="cart-total"></div>
          <div class="cart-footer">
            <a class="btn btn-ghost" href="shop.html">Add more to cart</a>
            <a class="btn btn-primary" href="checkout.html" id="checkout-btn">Checkout</a>
          </div>
        </div>
      </section>
    </main>
  </div>
  <nav class="side-nav">
    <div class="nav-brand">
      <a href="index.html" class="logo">GlorÃ© Classique</a>
      <div class="tagline">Curated Â· Affordable Â· Luxury</div>
    </div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="categories.html">Categories</a></li>
      <li><a href="shop.html">Shop All</a></li>
      <li><a href="cart.html" class="active">Edit Cart <span id="nav-cart-count" class="cart-count">0</span></a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <button class="close-nav" type="button" aria-label="Close navigation" style="display:none">&times;</button>
    <div class="nav-cta">
      <a href="https://instagram.com/glore_classique" target="_blank" rel="noopener" class="pill">@glore_classique</a>
      <a class="btn btn-primary btn-full" href="shop.html">Shop now</a>
    </div>
  </nav>
</div>
<script src="js/main.js"></script>
<script>
// --- Robust Cart, Nav, and Cart Page Logic ---
if (typeof getCart !== 'function') {
  window.getCart = function() {
    try {
      return JSON.parse(localStorage.getItem('cart') || '[]');
    } catch (e) {
      return [];
    }
  };
}
if (typeof updateCartCount !== 'function') {
  window.updateCartCount = function() {
    var cart = getCart();
    var count = cart.reduce(function(sum, item) { return sum + (item.qty || 0); }, 0);
    var els = [
      document.getElementById('cart-count'),
      document.getElementById('nav-cart-count')
    ];
    els.forEach(function(el) { if (el) el.textContent = count; });
  };
}
function renderCartPage() {
  const cart = getCart();
  const cartList = document.getElementById('cart-list');
  const cartTotal = document.getElementById('cart-total');
  if (!cart.length) {
    cartList.innerHTML = '<div style="text-align:center;color:#aaa;">Your cart is empty.</div>';
    cartTotal.innerHTML = '';
    return;
  }
  let total = 0;
  cartList.innerHTML = cart.map(item => {
    total += item.price * item.qty;
    return `<div class='cart-item'>
      <img src='${item.image}' alt='${item.name}' class='cart-thumb'>
      <div class='cart-info'>
        <div class='cart-title'>${item.name}${item.colorName ? ` <span class='cart-color'>(${item.colorName})</span>` : ''}</div>
        <div class='cart-meta'>â‚¦${item.price.toLocaleString()} x ${item.qty}</div>
      </div>
      <button class='cart-remove' onclick='removeFromCartPage(${item.id}${item.colorIndex !== undefined ? "," + item.colorIndex : ""})'>&times;</button>
    </div>`;
  }).join('');
  cartTotal.innerHTML = `<div style='text-align:right;font-weight:bold;font-size:1.2em;margin:1em 0;'>Total: â‚¦${total.toLocaleString()}</div>`;
}
function removeFromCartPage(id, colorIndex) {
  let cart = getCart();
  if (colorIndex !== undefined) {
    cart = cart.filter(i => !(i.id === id && i.colorIndex === colorIndex));
  } else {
    cart = cart.filter(i => i.id !== id);
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCartPage();
  if (window.updateCartCount) updateCartCount();
}
window.renderCartPage = renderCartPage;
document.addEventListener('DOMContentLoaded', function() {
  // Always update cart count on load
  updateCartCount();
  renderCartPage();
  // Nav and cart sidebar open/close
  var hamburger = document.querySelector('.hamburger');
  var navOverlay = document.querySelector('.nav-overlay');
  var sideNav = document.querySelector('.side-nav');
  var topBar = document.querySelector('.top-bar');
  var closeNav = document.querySelector('.close-nav');
  var cartBtn = document.querySelector('.cart-btn');
  var cartOverlay = document.querySelector('.cart-overlay');
  if (hamburger) {
    hamburger.onclick = function() {
      sideNav.classList.toggle('active');
      navOverlay.classList.toggle('active');
      topBar.classList.toggle('nav-open');
    };
  }
  if (navOverlay) {
    navOverlay.onclick = function() {
      sideNav.classList.remove('active');
      navOverlay.classList.remove('active');
      topBar.classList.remove('nav-open');
    };
  }
  if (closeNav) {
    closeNav.onclick = function() {
      sideNav.classList.remove('active');
      navOverlay.classList.remove('active');
      topBar.classList.remove('nav-open');
    };
  }
  if (cartBtn) {
    cartBtn.onclick = function(e) {
      e.preventDefault();
      // No sidebar cart on this page, just reload
      window.location.href = 'cart.html';
    };
  }
});
</script>
</body>
</html>
